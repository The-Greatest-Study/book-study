# 명령행 인수 구문분석기 사례 연구

- 명령행 인수의 구문을 분석할 필요가 있다.

- Args 생성자에서 ArgsException이 발생하지 않는다면 Args 인스턴스에 질의를 던져도 좋다.

---

### Args 구현

- Args 구현 시, 오류 상수 구현에 너무 긴 코드?

  - 자바는 정적 타입 언어. 타입 시스템을 만족하기 위해서는 많은 단어 필요

- 깨끗한 코드를 짠다는 것은 지저분한 코드를 짠 뒤 정리해야 한다는 의미
  - 단계적 개선이 필요하다!

### Args: 1차 초안

- 인수 유형이 많아지면서 유지보수의 틀을 벗어나자, 개발을 멈췄다

  [ **리팩터링의 시작** ]

1.  인수 유형을 맞추기 위해 스키마 요소의 구문을 분석<br>
2.  명령행 인수에서 인수 유형 분석해 진짜 유형으로 변환<br>
3.  getXXX 메서드를 구현해 호출자에게 진짜 유형을 반환

        인수 유형은 다양하지만 모두가 유사한 메서드를 제공하니 클래스 하나로 만들기로 결정

### 점진적으로 개선하다

- 구조를 크게 뒤집는 "개선"으로 인한 회복불능 프로그램
  - 테스트 주도 개발이 필요
    - 시스템을 망가뜨리는 변경을 허용하지 않는다.
    - 언제든 실행 가능한 자동화 테스트 슈트가 필요

### Args: 점진적 코드개선 예제

- 의미 단위로 타입을 묶어나가면 이해하기 쉽고 간결한 코드가 된다.

- 큰목표를 향해 점진적 개선: 리팩터링은 코드를 여기저기 옮기는 과정이 필수

- 인수유형의 확장을 생각하면서 코드를 정리해 나간다.

- 오류처리 코드도 구조적으로 정리를 잘해놓는 것이 유지보수 및 사용성이 좋다.

- SRP(Single Responsibility Principle) 위반의 상황? 효율을 따져서 절충안을 가질 수 있다.
  - 하지만 SRP 새로운 클래스로 깔끔하게 나누는 것의 장점을 잘 비교하자.

### 결론

- 소프트웨어 설계는 분할을 잘해야한다.

- 나쁜 일정은 다시 짜면 되지만, 나쁜 코드는 다시 짤 수 없다.

- 처음부터 깨끗한 코드 상태를 유지하라.
