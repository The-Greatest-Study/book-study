# Chapter27 크고 작은 모든 서비스들

## **서비스의 통설**
아래의 사실은 서비스 지향 아키텍처, 마이크로서비스 아키텍처가 인기를 끄는 이유이지만 이는 일부만 성립되므로 주의가 필요하다.
- 상호 결합의 철저한 분리
- 개발과 배포의 독립

<br>

## **서비스는 아키텍처가 아니다**
시스템의 아키텍처는 의존성 규칙을 준수하며 고수준의 정책을 저수준의 정책의 세부사항으로부터 분리하는 경계의 의해 정의된다. <br>
이때 단순히 어플리케이션의 행위를 분리할 뿐인 서비스는 값비싼 함수 호출에 불과하다. <br>
서비스는 프로세스나 플랫폼 경계를 가로지르는 함수 호출에 지나지 않는다. <br>

<br>

아키텍처의 경계는 서비스 사이에 있지 않고, 오히려 서비스를 관통하며 서비스를 컴포넌트 단위로 분할한다.<br>
아키텍처 경계를 정의하는 것은 서비스 내에 위치한 컴포넌트다.

<br>

## **결합 분리의 오류**
시스템을 서비스들로 분리하면 서비스는 개별 변수 수준에서는 각각 결합이 분리된다. <br>

>하지만 프로세서 내의 또는 네트워크 상의 공유 자원 때문에 결합될 가능성이 여전히 존재한다. <br>
특히 서로 공유하는 데이터에 의해 이들 서비스는 강력하게 결합된다.

<br>

## **개발 및 배포 독립성의 오류**
개발 및 배포의 독립성은 확장 가능한 것으로 간주되곤 한다. 이를 활용해 대규모 엔터프라이즈 시스템을 개발, 유지보수, 운영 또한 비슷한 팀 단위로 분할 할 수 있다고 여긴다.<br>
하지만 이런 현상은 극히 일부이다.

<br>

> 대규모 엔터프라이즈 시스템은 모노리틱 시스템 혹은 컴포넌트 시스템으로도 구축 가능하다.<br>
(서비스는 확장 가능한 시스템 구축의 유일한 방안이 아니다)

<br>

>*결합 분리의 오류*에 의해 데이터나 행위가 결합되어 있다면 결합된 정도에 맞게 개발, 배포, 운영의 조정이 필요하다.

<br>

## **야옹이 문제**
>횡단 관심사가 지닌 문제

기능적 분해는 새로운 기능이 기능적 행위를 횡단하는 상황에 매우 취약하다.<br>
이를 해결하기 위해, 컴포넌트 기반 아키텍처에서는 다형적으로 확장할 수 있는 클래스 집합을 생성해 새로운 기능이 처리하도록 제안한다.

<br>

## **컴포넌트 기반 서비스**
서비스는 SOLID 원칙대로 설계할 수 있으며 컴포넌트 구조를 갖출 수도 있다.<br>
이를 통해 서비스내의 기존 컴포넌트들을 변경하지 않고도 새로운 컴포넌트를 추가할 수 있다.

<br>

자바를 예시로 들면, 서비스를 하나 이상의 jar파일에 포함되는 추상클래스의 집합으로 보자.<br>
새로운 기능 배포는 서비스 재배포가 아닌, 서비스를 로드하는 경로에 단순히 새로운 jar를 추가하는 문제이다.<br>
이는 개방폐쇄 원칙을 준수하며 서비스를 추가할 수 있게 한다.